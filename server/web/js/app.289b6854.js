(function(t){function e(e){for(var i,r,a=e[0],c=e[1],u=e[2],d=0,p=[];d<a.length;d++)r=a[d],s[r]&&p.push(s[r][0]),s[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);l&&l(e);while(p.length)p.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],i=!0,a=1;a<n.length;a++){var c=n[a];0!==s[c]&&(i=!1)}i&&(o.splice(e--,1),t=r(r.s=n[0]))}return t}var i={},s={app:0},o=[];function r(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var u=0;u<a.length;u++)e(a[u]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var i=n("64a9"),s=n.n(i);s.a},"36a4":function(t,e,n){"use strict";var i=n("6d80"),s=n.n(i);s.a},"36ba":function(t,e,n){},"449b":function(t,e,n){"use strict";var i=n("58ca"),s=n.n(i);s.a},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var i,s,o=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("section",{staticClass:"header-bar"},[n("h1",[t._v("header-bar Component")]),n("button",{staticClass:"header-button",on:{click:function(e){t.isEditLayout=!t.isEditLayout}}},[t._v("Edit")]),t.isEditLayout?n("portal",{attrs:{to:"settings-bar"}},[n("widget-library",{attrs:{layout:t.layout},on:{addWidget:t.addWidget}})],1):t._e()],1),n("AppContent",{attrs:{layout:t.layout,isEditLayout:t.isEditLayout},on:{removeWidget:t.removeWidget}})],1)},a=[],c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"app-content",attrs:{id:"kek"}},[n("portal-target",{directives:[{name:"show",rawName:"v-show",value:t.isEditLayout,expression:"isEditLayout"}],staticClass:"settings-bar",attrs:{name:"settings-bar"}}),n("grid-layout",{attrs:{layout:t.layout,"col-num":12,"row-height":30,"is-draggable":t.isEditLayout,"is-resizable":t.isEditLayout,"is-mirrored":!1,"vertical-compact":!1,margin:[10,10],"use-css-transforms":!0},on:{"update:layout":function(e){t.layout=e}}},t._l(t.layout,function(e){return n("grid-item",{key:e.i,attrs:{x:e.x,y:e.y,w:e.w,h:e.h,i:e.i}},[n("base-widget",{attrs:{isEditLayout:t.isEditLayout,widgetId:e.i,settings:e.settings},on:{remove:t.removeWidget}},[n(e.c,{tag:"component",class:{showTitle:e.settings.showTitle.val}})],1)],1)}),1)],1)},u=[],l=n("7be8"),d=n.n(l),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"socket-widget"},[t._v("\n  "+t._s(t.temp)+"\n")])},f=[],g=n("cebc"),m=n("2f62"),b={methods:Object(g["a"])({},Object(m["b"])(["increment_subs","decrement_subs","update_subscription_value"]),{getState:function(t){var e=this;return new Promise(function(n,i){e.$socket.emit("getState",t,function(t,e){t||!e?i(t):n(e)})})},subscribe:function(t){var e=this;this.increment_subs(t),this.getState(t).then(function(n){e.update_subscription_value({id:t,newVal:n.val})},function(e){e?console.error(e):console.error("The state with objectid: "+t+" does not exist")}),this.$socket.emit("subscribe",t)},unsubscribe:function(t){var e=this;this.decrement_subs(t).then(function(n){n&&e.$socket.emit("unsubscribe",t)})}})},v=n("42454"),h=n.n(v),y={mounted:function(){this.$parent.settings=h()(this.$parent.settings,this.settings)}},_={name:"socket-widget",components:{},props:[],mixins:[b,y],data:function(){return{settings:{title:{val:"CPU Temp",type:"input"}},val:""}},mounted:function(){},methods:{},computed:{temp:function(){return this.$store.state.subscriptions["rpi2.0.temperature.soc_temp"].val}},created:function(){this.subscribe("rpi2.0.temperature.soc_temp")},destroyed:function(){this.unsubscribe("rpi2.0.temperature.soc_temp")}},w=_,k=(n("36a4"),n("2877")),O=Object(k["a"])(w,p,f,!1,null,"5833d536",null),S=O.exports,x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"base-widget",on:{click:t.openSettings}},[t.settings.showTitle.val?n("div",[n("span",{staticClass:"base-title"},[t._v(t._s(t.settings.title.val))])]):t._e(),t._t("default"),t.settingsOpen?n("widget-settings-bar",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:t.closeSettings,expression:"closeSettings"}],attrs:{settings:t.settings,widgetId:t.widgetId}}):t._e()],2)},E=[],L=(n("c5f6"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("portal",{attrs:{to:"settings-bar"}},[n("section",{staticClass:"widget-settings-bar"},[t._v("\nSettings\n  "),n("ul",[t._l(t.settings,function(e,i){return n("li",{key:i},[t._v("\n      "+t._s(i)+" \n      "),"input"==t.settings[i].type?n("input",{directives:[{name:"model",rawName:"v-model",value:t.settings[i].val,expression:"settings[key].val"}],attrs:{placeholder:"settings[key].val"},domProps:{value:t.settings[i].val},on:{input:function(e){e.target.composing||t.$set(t.settings[i],"val",e.target.value)}}}):t._e(),"checkbox"==t.settings[i].type?n("input",{directives:[{name:"model",rawName:"v-model",value:t.settings[i].val,expression:"settings[key].val"}],attrs:{type:"checkbox",placeholder:"settings[key].val"},domProps:{checked:Array.isArray(t.settings[i].val)?t._i(t.settings[i].val,null)>-1:t.settings[i].val},on:{change:function(e){var n=t.settings[i].val,s=e.target,o=!!s.checked;if(Array.isArray(n)){var r=null,a=t._i(n,r);s.checked?a<0&&t.$set(t.settings[i],"val",n.concat([r])):a>-1&&t.$set(t.settings[i],"val",n.slice(0,a).concat(n.slice(a+1)))}else t.$set(t.settings[i],"val",o)}}}):t._e()])}),n("li",[n("button",{on:{click:t.remove}},[t._v("Remove Widget")])])],2)])])}),C=[],j={name:"widget-settings-bar",components:{},props:["settings","widgetId"],data:function(){return{}},computed:{},mounted:function(){},methods:{remove:function(){this.$parent.$emit("remove",this.widgetId)}}},T=j,W=(n("c57e"),Object(k["a"])(T,L,C,!1,null,"f84bbde6",null)),$=W.exports,P=n("c7db"),N={mixins:[P["mixin"]],name:"base-widget",props:{height:Number,width:Number,isEditLayout:Boolean,widgetId:String,settings:Object},data:function(){return{baseStyle:"base-widget",settingsOpen:!1}},components:{WidgetSettingsBar:$},computed:{},mounted:function(){},watch:{isEditLayout:function(){this.isEditLayout||(this.settingsOpen=!1)}},methods:{openSettings:function(){this.isEditLayout&&(this.settingsOpen=!0)},closeSettings:function(t){t.path.every(function(t){return"widget-settings-bar"!=t.className})&&(this.settingsOpen=!1)}}},I=N,A=(n("637f"),Object(k["a"])(I,x,E,!1,null,"21e309a9",null)),M=A.exports,B={name:"app-content",components:{GridLayout:d.a.GridLayout,GridItem:d.a.GridItem,SocketWidget:S,BaseWidget:M},props:{isEditMode:Boolean,isEditLayout:Boolean,layout:Array},data:function(){return{}},computed:{},mounted:function(){},methods:{removeWidget:function(t){this.$emit("removeWidget",t)}}},G=B,K=(n("f0be"),Object(k["a"])(G,c,u,!1,null,"43b42a3a",null)),R=K.exports,F=n("0644"),U=n.n(F),J=n("1723"),V=n.n(J),z=(n("7f7f"),n("ac4d"),n("8a81"),n("ac6a"),n("456d"),n("6edf")),D=n.n(z),q={MONITORING:"Monitoring",CONTROL:"Control",STUFF:"Stuff"},H={name:"widget-library",components:{},props:["layout"],data:function(){return{library:[{category:q.CONTROL,tags:["control","socket"],component:"socket-widget",name:"Socket"},{category:q.CONTROL,tags:["control","socket"],component:"socket-widget",name:"Socket"},{category:q.STUFF,tags:["control","socket"],component:"socket-widget",name:"Socket"}]}},computed:{},mounted:function(){},methods:{addWidget:function(t){this.$emit("addWidget",t)}},render:function(t){for(var e=this,n=[],i=D()(this.library,function(t){return t.category}),s=0,o=Object.keys(i);s<o.length;s++){var r=o[s],a=[],c=!0,u=!1,l=void 0;try{for(var d,p=function(){var n=d.value;a.push(t("li",[n.name,t("button",{on:{click:function(t){e.addWidget(n.component)}}},"Add")]))},f=i[r][Symbol.iterator]();!(c=(d=f.next()).done);c=!0)p()}catch(g){u=!0,l=g}finally{try{c||null==f.return||f.return()}finally{if(u)throw l}}n.push(t("li",[r,[t("ul",a)]]))}return t("div",[t("h1","Library"),t("ul",[n])])}},Q=H,X=(n("449b"),Object(k["a"])(Q,i,s,!1,null,"96f53602",null)),Y=X.exports,Z=n("c64e"),tt=n.n(Z),et={title:{val:"Default title",type:"input"},showTitle:{val:!0,type:"checkbox"}},nt=[{x:0,y:0,w:2,h:2,i:tt()(),c:"SocketWidget",settings:U()(et)},{x:2,y:0,w:2,h:4,i:tt()(),c:"SocketWidget",settings:U()(et)},{x:4,y:0,w:2,h:5,i:tt()(),c:"SocketWidget",settings:U()(et)}],it={name:"app",components:{AppContent:R,WidgetLibrary:Y},data:function(){return{layout:nt,isEditLayout:!1}},computed:{},methods:{addWidget:function(t){var e=V()(this.layout,function(t){return t.y+t.h});this.layout.push({x:0,y:e.y+e.h,w:2,h:2,i:tt()(),c:t,settings:U()(et)})},removeWidget:function(t){this.layout=this.layout.filter(function(e){return e.i!=t})}}},st=it,ot=(n("034f"),Object(k["a"])(st,r,a,!1,null,null,null)),rt=ot.exports,at=n("2b88"),ct=n.n(at);o["default"].use(m["a"]);var ut=new m["a"].Store({state:{subscriptions:{},connected:!1},getters:{subscriptionCount:function(t){return Object.keys(t.subscriptions).length}},mutations:{SOCKET_connect:function(t){console.info("Socket connected"),t.connected=!0},SOCKET_disconnect:function(t){t.connected=!1},SOCKET_stateChange:function(t,e){t.subscriptions[e[0]].val=e[1].val},increment_subs:function(t,e){var n=t.subscriptions[e];n||(o["default"].set(t.subscriptions,e,{subscriber:0,val:void 0}),n=t.subscriptions[e]),n.subscriber++},decrement_subs:function(t,e){var n=t.subscriptions[e];n.subscriber--,0==n.subscriber&&o["default"].delete(t.subscriptions,e)},update_subscription_value:function(t,e){var n=e.id,i=e.newVal,s=t.subscriptions[n];s&&(s.val=i)}},actions:{increment_subs:function(t,e){var n=t.commit;n("increment_subs",e)},decrement_subs:function(t,e){var n=t.commit,i=t.state;return new Promise(function(t){n("decrement_subs",e),t(void 0===i.subscriptions[e])})},update_subscription_value:function(t,e){var n=t.commit;n("update_subscription_value",e)}}}),lt=n("5132"),dt=n.n(lt);o["default"].config.productionTip=!1,o["default"].use(ct.a),o["default"].use(new dt.a({debug:!0,connection:"http://192.168.178.36:8084",vuex:{store:ut,actionPrefix:"SOCKET_",mutationPrefix:"SOCKET_"}})),new o["default"]({store:ut,render:function(t){return t(rt)}}).$mount("#app")},"58ca":function(t,e,n){},6197:function(t,e,n){},"637f":function(t,e,n){"use strict";var i=n("6197"),s=n.n(i);s.a},"64a9":function(t,e,n){},"6d80":function(t,e,n){},"9d11":function(t,e,n){},c57e:function(t,e,n){"use strict";var i=n("9d11"),s=n.n(i);s.a},f0be:function(t,e,n){"use strict";var i=n("36ba"),s=n.n(i);s.a}});
//# sourceMappingURL=app.289b6854.js.map